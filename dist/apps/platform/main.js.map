{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///external commonjs \"@nestjs/common\"","webpack:///external commonjs \"@nestjs/core\"","webpack:///./src/app.module.ts","webpack:///external commonjs \"tslib\"","webpack:///./src/app/app.controller.ts","webpack:///./src/app/app.service.ts","webpack:///./src/config/config.module.ts","webpack:///./src/config/config.service.ts","webpack:///./src/config/env.config.ts","webpack:///../../packages/zod-env/src/index.ts","webpack:///../../packages/zod-env/src/lib/z-yaml-loader.ts","webpack:///external node-commonjs \"fs\"","webpack:///external commonjs \"js-yaml\"","webpack:///external node-commonjs \"path\"","webpack:///../../packages/zod-env/src/lib/zod-env.ts","webpack:///./src/config/env-schema.ts","webpack:///external commonjs \"zod\"","webpack:///./src/common/constants/app.constant.ts","webpack:///webpack/bootstrap","webpack:///./src/main.ts"],"sourcesContent":["module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","import { Module } from '@nestjs/common';\nimport { AppController } from './app/app.controller';\nimport { AppService } from './app/app.service';\nimport { ConfigModule } from './config/config.module';\n\n@Module({\n  imports: [ConfigModule],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n","module.exports = require(\"tslib\");","import { Controller, Get } from '@nestjs/common';\nimport { AppService } from './app.service';\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  getData() {\n    return this.appService.getData();\n  }\n}\n","import { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class AppService {\n  getData(): { message: string } {\n    return { message: 'Hello API' };\n  }\n}\n","import { Global, Module } from '@nestjs/common';\nimport { ConfigService } from './config.service';\n\n/**\n * ConfigModule\n *\n * èŒè´£ï¼š\n * 1. æä¾›å…¨å±€é…ç½®æœåŠ¡\n * 2. ç®¡ç†é…ç½®çš„åŠ è½½å’Œæ³¨å…¥\n * 3. ç¡®ä¿é…ç½®çš„å•ä¾‹æ€§\n */\n@Global()\n@Module({\n  providers: ConfigService,\n  exports: ConfigService,\n})\nexport class ConfigModule {}\n","import { EnvConfig } from './env.config';\n\nexport const ConfigService = [EnvConfig];\n","import { Injectable } from '@nestjs/common';\nimport { ZodEnv } from '@aiofc/zod-env';\nimport { join } from 'path';\nimport { EnvSchema, EnvValidatedConfig } from './env-schema';\n\n/**\n * EnvService ç±»\n *\n * è¿™æ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œè´Ÿè´£æŠŠç»è¿‡éªŒè¯çš„ç¯å¢ƒå˜é‡ï¼ˆEnvValidatedConfigï¼‰åˆ†è§£ä¸ºè‹¥å¹²ä¸ªé…ç½®ç»„ï¼Œ\n * è¿™äº›é…ç½®ç»„è¢«æš´éœ²ä¸ºå±æ€§ï¼Œä¾›åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚\n *\n * èŒè´£ï¼š\n * 1. ç®¡ç†åº”ç”¨ç¨‹åºçš„é…ç½®\n * 2. é€šè¿‡ä¾èµ–æ³¨å…¥æä¾›é…ç½®æ•°æ®\n * 3. æä¾›ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®æ¥å£\n */\n@Injectable()\nexport class EnvConfig extends ZodEnv<EnvValidatedConfig> {\n  constructor() {\n    super(EnvSchema, {\n      configDir: join(__dirname, '/assets'),\n      configFilePrefix: 'app.config',\n    });\n  }\n\n  get app() {\n    return Object.freeze({ ...this.config.app });\n  }\n\n  get logger() {\n    return Object.freeze({ ...this.config.logger });\n  }\n\n  get database() {\n    return Object.freeze({ ...this.config.database });\n  }\n}\n","export * from './lib/z-yaml-loader';\nexport * from './lib/zod-env';\n","import { readFileSync, existsSync } from 'fs';\nimport * as yaml from 'js-yaml';\nimport { join } from 'path';\nimport { z } from 'zod';\n\n/**\n * æ¥å£ç”¨äºæè¿°é…ç½®æ–‡ä»¶ï¼ˆyamlï¼‰çš„è®¾ç½®é€‰é¡¹\n * @remarks\n * åŒ…æ‹¬:\n * - é…ç½®æ–‡ä»¶çš„å­˜æ”¾ç›®å½•\n * - é…ç½®æ–‡ä»¶çš„æ–‡ä»¶åå‰ç¼€\n * é€šè¿‡è¿™äº›é€‰é¡¹ï¼Œå¯ä»¥çµæ´»åœ°æŒ‡å®šé…ç½®æ–‡ä»¶çš„å­˜æ”¾ä½ç½®å’Œæ–‡ä»¶å‘½åæ–¹å¼ã€‚\n *\n * å‘½åè§„åˆ™:\n * - é…ç½®æ–‡ä»¶çš„æ–‡ä»¶åæ ¼å¼ä¸º: `{prefix}.{NODE_ENV}.yaml`\n *\n * @example\n * ```typescript\n * const options: YamlFileOptions = {\n *   configDir: '/path/to/config',    // é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•\n *   configFilePrefix: 'app'          // ç”Ÿæˆçš„é…ç½®æ–‡ä»¶åå°†ä¸º: app.development.yaml\n * };\n * ```\n */\nexport interface YamlFileOptions {\n  /**\n   * é…ç½®æ–‡ä»¶ç›®å½•è·¯å¾„\n   * @default process.cwd()/assets\n   */\n  configDir?: string;\n  /**\n   * é…ç½®æ–‡ä»¶åç§°å‰ç¼€\n   * @default 'config'\n   * @remarks æœ€ç»ˆçš„é…ç½®æ–‡ä»¶åæ ¼å¼ä¸º: `{prefix}.{NODE_ENV}.yaml`\n   */\n  configFilePrefix: string;\n}\n\n/**\n * æ„å»ºé…ç½®æ–‡ä»¶è·¯å¾„\n * @param options é…ç½®æ–‡ä»¶é€‰é¡¹\n * @returns é…ç½®æ–‡ä»¶è·¯å¾„\n * @throws å½“æœªæä¾›å¿…éœ€çš„configFilePrefixæ—¶æŠ›å‡ºé”™è¯¯\n */\nconst buildConfigPath = (options: YamlFileOptions): string => {\n  if (!options.configFilePrefix) {\n    throw new Error('configFilePrefix is required');\n  }\n\n  const env = process.env['NODE_ENV'] || 'development';\n  const prefix = options.configFilePrefix;\n  const configDir = options.configDir || join(__dirname, 'assets');\n\n  return join(configDir, `${prefix}.${env}.yaml`);\n};\n\n/**\n * è¯»å–YAMLæ–‡ä»¶å†…å®¹\n * @param filePath é…ç½®æ–‡ä»¶è·¯å¾„\n * @returns é…ç½®æ–‡ä»¶å†…å®¹\n */\nconst readYamlFile = (filePath: string): Record<string, unknown> => {\n  // console.log('è·å–é…ç½®æ–‡ä»¶', filePath);\n  if (!existsSync(filePath)) {\n    throw new Error(`é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: ${filePath}`);\n  }\n\n  const content = readFileSync(filePath, 'utf8');\n  return yaml.load(content) as Record<string, unknown>;\n};\n\n/**\n * é…ç½®éªŒè¯å‡½æ•°\n * @param config å¾…éªŒè¯çš„é…ç½®å¯¹è±¡\n * @returns ç»è¿‡éªŒè¯å’Œç±»å‹è½¬æ¢çš„é…ç½®å¯¹è±¡\n * @throws å½“éªŒè¯å¤±è´¥æ—¶æŠ›å‡ºé”™è¯¯\n */\nconst envValidate = <T>(\n  config: Record<string, unknown>,\n  schema: z.ZodSchema<T>,\n): T => {\n  try {\n    const validated = schema.parse(config);\n    console.log('éªŒè¯é€šè¿‡:', JSON.stringify(validated, null, 2));\n    // process.env['NODE_ENV'] = config['NODE_ENV'] as string;\n    console.log('é…ç½®å‚æ•°éªŒè¯é€šè¿‡ï¼Œå½“å‰ç¯å¢ƒ:', process.env['NODE_ENV']);\n    return validated;\n  } catch (error) {\n    console.error('éªŒè¯å¤±è´¥:', error);\n    throw error;\n  }\n};\n\n/**\n * ç”¨äºåŠ è½½é…ç½®æ–‡ä»¶ï¼ˆyamlï¼‰å¹¶éªŒè¯è®¾å®šç¯å¢ƒå˜é‡çš„å‡½æ•°ã€‚\n * @remarks\n * è¯¥å‡½æ•°ä¼šæ ¹æ®NODE_ENVç¯å¢ƒå˜é‡åŠ è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨Zod schemaè¿›è¡ŒéªŒè¯ã€‚\n * å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–éªŒè¯å¤±è´¥ï¼Œåˆ™æŠ›å‡ºé”™è¯¯å¹¶é€€å‡ºè¿›ç¨‹ã€‚\n *\n * @param options - é…ç½®æ–‡ä»¶é€‰é¡¹,ç”¨äºæŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œå‰ç¼€\n * @param schema - Zod schemaå¯¹è±¡,ç”¨äºéªŒè¯é…ç½®æ–‡ä»¶å†…å®¹\n * @returns ç»è¿‡éªŒè¯çš„é…ç½®å¯¹è±¡\n * @throws å½“é…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–éªŒè¯å¤±è´¥æ—¶é€€å‡ºè¿›ç¨‹\n * @example\n * ```typescript\n * // å®šä¹‰é…ç½®schema\n * const configSchema = z.object({\n *   port: z.number(),\n *   host: z.string(),\n *   database: z.object({\n *     url: z.string(),\n *   })\n * });\n *\n * // åŠ è½½å¹¶éªŒè¯é…ç½®\n * const config = loadYamlEnvOptions({\n *   configDir: './config',\n *   configFilePrefix: 'app'\n * }, configSchema);\n *\n * // ä½¿ç”¨é…ç½®\n * console.log(config.port); // ç±»å‹å®‰å…¨çš„è®¿é—®\n * ```\n */\nexport const loadYamlEnvOptions = <T>(\n  options: YamlFileOptions,\n  schema: z.ZodSchema<T>,\n): T => {\n  try {\n    const configPath = buildConfigPath(options);\n    const config = readYamlFile(configPath);\n    return envValidate(config, schema);\n  } catch (error) {\n    console.error('é…ç½®åŠ è½½å¤±è´¥:', error);\n    // æµ‹è¯•ç¯å¢ƒä¸‹ç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œè€Œä¸æ˜¯é€€å‡ºè¿›ç¨‹\n    if (process.env['NODE_ENV'] === 'test') {\n      throw error;\n    }\n    process.exit(1);\n  }\n};\n","module.exports = require(\"fs\");","module.exports = require(\"js-yaml\");","module.exports = require(\"path\");","import { z } from 'zod';\nimport { loadYamlEnvOptions, YamlFileOptions } from './z-yaml-loader';\n\n/**\n * ç”¨äºåŠ è½½å’Œç®¡ç†é…ç½®çš„åŠŸèƒ½ç±»\n * @see {@link AppConfig}\n * @remarks\n * è¯¥ç±»å°è£…äº†é…ç½®æ–‡ä»¶çš„åŠ è½½å’ŒéªŒè¯è¿‡ç¨‹ï¼Œå¹¶æä¾›ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®æ–¹å¼ã€‚\n * ä½¿ç”¨`ZodSchema`è¿›è¡Œé…ç½®éªŒè¯ï¼Œé‡‡ç”¨`YAML`æ ¼å¼æ–‡æ¡£ä½œä¸ºé…ç½®æ–‡ä»¶ã€‚\n *\n * @typeParam T - é…ç½®å¯¹è±¡çš„ç±»å‹\n *\n * ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½ä¼šæœ‰é…ç½®æ–‡ä»¶çš„åŠ è½½å’ŒéªŒè¯çš„è¿‡ç¨‹ï¼Œè¿™éƒ¨åˆ†çš„é€»è¾‘æ˜¯é€šç”¨çš„ã€‚\n * ä¸åŒçš„é¡¹ç›®å·®å¼‚ä½“ç°åœ¨é…ç½®å¯¹è±¡çš„ç±»å‹å’ŒéªŒè¯è§„åˆ™çš„å®šä¹‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠè¿™éƒ¨åˆ†é€»è¾‘ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ã€‚\n * äº¤ç”±æ¶ˆè´¹è€…åœ¨è°ƒç”¨æ—¶æ¥å®Œæˆï¼Œä»è€Œå¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚\n *\n * é€šè¿‡æ³›å‹å‚æ•°`T`ï¼Œæˆ‘ä»¬æŠŠå·®å¼‚åŒ–çš„éƒ¨åˆ†â€”â€”é…ç½®å¯¹è±¡çš„ç±»å‹å®šä¹‰å’ŒéªŒè¯è§„åˆ™å®šä¹‰ï¼Œéš”ç¦»åœ¨ç±»çš„å¤–éƒ¨ï¼Œç”±æ¶ˆè´¹è€…æ ¹æ®é¡¹ç›®çš„éœ€æ±‚å®Œæˆè¿™éƒ¨åˆ†é€»è¾‘ä»£ç çš„ç¼–å†™ï¼Œ\n * å¹¶é€šè¿‡è°ƒç”¨æœ¬ç±»æ¥å¤ç”¨é…ç½®æ–‡ä»¶çš„åŠ è½½å’ŒéªŒè¯è¿‡ç¨‹çš„é€»è¾‘ã€‚\n *\n * åŒæ—¶ï¼Œé…ç½®å†…å®¹å°è£…ä¸ºç±»çš„æˆå‘˜ï¼Œä½¿IDEèƒ½æä¾›è‡ªåŠ¨å®Œæˆå’Œç±»å‹æ£€æŸ¥åŠŸèƒ½ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚\n * @see {@link typedoc} æŸ¥çœ‹æ›´å¤š\n * @see your developer SDK for code samples\n *\n * @document externaldocs/demo.md\n *\n * @example\n * ```typescript\n * // å®šä¹‰é…ç½®schema\n * const configSchema = z.object({\n *   port: z.number(),\n *   host: z.string(),\n *   database: z.object({\n *     url: z.string()\n *   })\n * });\n *\n * // åˆ›å»ºZodEnvå®ä¾‹\n * const env = new ZodEnv(configSchema, {\n *   configDir: './config',\n *   configFilePrefix: 'app'\n * });\n *\n * // ä½¿ç”¨é…ç½®\n * const config = env.config;\n * console.log(config.port);    // ç±»å‹å®‰å…¨çš„è®¿é—®\n * console.log(config.host);    // IDEä¼šæä¾›è‡ªåŠ¨å®Œæˆ\n * ```\n * @see {@link https://tools.ietf.org/html/rfc1738| RFC 1738}\n *\n * [RFC 1738](https://tools.ietf.org/html/rfc1738)\n *\n * ![RFC 1738](https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3w7jaH3B0aNtw8NPhF6CPm/8af4c055c48aa7b1a2ffcdaf341117bf/511102367_1ce398ad1d_o.png)\n */\nexport class ZodEnv<T> {\n  /** å­˜å‚¨éªŒè¯åçš„é…ç½®å¯¹è±¡ */\n  private _config: T;\n\n  /**\n   * ç”¨äºåˆ›å»ºZodEnvå®ä¾‹\n   * @param schema - ç”¨äºéªŒè¯é…ç½®çš„Zod Schema\n   * @param options - YAMLé…ç½®æ–‡ä»¶çš„é€‰é¡¹\n   */\n  constructor(schema: z.ZodType<T>, options: YamlFileOptions) {\n    const config = loadYamlEnvOptions(options, schema);\n    this._config = config;\n  }\n\n  /**\n   * è·å–éªŒè¯åçš„é…ç½®å¯¹è±¡\n   * @returns ç±»å‹å®‰å…¨çš„é…ç½®å¯¹è±¡\n   */\n  get config(): T {\n    return this._config;\n  }\n}\n","import { z } from 'zod';\nimport { Environment } from '../common/constants/app.constant';\n\nexport const EnvSchema = z.object({\n  /**\n   * APIæœåŠ¡é…ç½®éƒ¨åˆ†\n   */\n  app: z.object({\n    port: z.coerce.number().default(3000), // APIæœåŠ¡ç«¯å£ï¼Œé»˜è®¤3000\n    globalPrefix: z.string().default('api'), // APIå…¨å±€è·¯ç”±å‰ç¼€ï¼Œé»˜è®¤'api'\n    NODE_ENV: z\n      .enum([Environment.DEVELOPMENT, Environment.PRODUCTION, Environment.TEST])\n      .default(Environment.DEVELOPMENT), // ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤'development'\n  }),\n\n  /**\n   * æ—¥å¿—é…ç½®éƒ¨åˆ†\n   */\n  logger: z.object({\n    trackingIdHeader: z.coerce.string().optional(), // å¯é€‰çš„è¿½è¸ªIDè¯·æ±‚å¤´\n  }),\n\n  /**\n   * æ•°æ®åº“é…ç½®éƒ¨åˆ†\n   */\n  database: z.object({\n    user: z.string(), // æ•°æ®åº“ç”¨æˆ·å\n    password: z.string(), // æ•°æ®åº“å¯†ç \n    host: z.string(), // æ•°æ®åº“ä¸»æœºåœ°å€\n    port: z.coerce.number().default(5432),\n    name: z.string(), // æ•°æ®åº“åç§°\n    systemSchema: z.string(), // ç³»ç»ŸSchemaï¼ˆç”¨äºå­˜å‚¨ç§Ÿæˆ·ä¿¡æ¯ç­‰ç³»ç»Ÿè¡¨ï¼‰\n    pool: z\n      .object({\n        max: z.number().optional(),\n        min: z.number().optional(),\n        idle_timeout: z.number().optional(),\n        connect_timeout: z.number().optional(),\n        max_lifetime: z.number().optional(),\n      })\n      .optional(),\n    isolationStrategy: z.enum(['schema', 'row']).default('row'), // ç§Ÿæˆ·éš”ç¦»ç­–ç•¥ï¼šschema=ç‹¬ç«‹Schemaéš”ç¦»ï¼Œrow=è¡Œçº§å®‰å…¨éš”ç¦»\n  }),\n});\n\nexport type EnvValidatedConfig = z.infer<typeof EnvSchema>;\n","module.exports = require(\"zod\");","/** æ ‡è®°è·¯ç”±ä¸ºå…¬å¼€è®¿é—®(æ— éœ€è®¤è¯) */\nexport const IS_PUBLIC = 'isPublic';\n\n/** æ ‡è®°è·¯ç”±ä¸ºå¯é€‰è®¤è¯ */\nexport const IS_AUTH_OPTIONAL = 'isAuthOptional';\n\n/**\n * ç¯å¢ƒæšä¸¾\n * @enum {string}\n */\nexport enum Environment {\n  /** æœ¬åœ°ç¯å¢ƒ */\n  LOCAL = 'local',\n  /** å¼€å‘ç¯å¢ƒ */\n  DEVELOPMENT = 'development',\n  /** é¢„å‘å¸ƒç¯å¢ƒ */\n  STAGING = 'staging',\n  /** ç”Ÿäº§ç¯å¢ƒ */\n  PRODUCTION = 'production',\n  /** æµ‹è¯•ç¯å¢ƒ */\n  TEST = 'test',\n}\n\n/**\n * æ—¥å¿—æœåŠ¡æšä¸¾\n * @enum {string}\n */\nexport enum LogService {\n  /** æ§åˆ¶å°æ—¥å¿— */\n  CONSOLE = 'console',\n  /** Google Cloud Logging æœåŠ¡ */\n  GOOGLE_LOGGING = 'google_logging',\n  /** AWS CloudWatch æ—¥å¿—æœåŠ¡ */\n  AWS_CLOUDWATCH = 'aws_cloudwatch',\n}\n\n/**\n * æ’åºæ–¹å‘æšä¸¾\n * @enum {string}\n */\nexport enum Order {\n  /** å‡åº */\n  ASC = 'ASC',\n  /** é™åº */\n  DESC = 'DESC',\n}\n\n/** éœ€è¦åœ¨æ—¥å¿—ä¸­éšè—çš„æ•æ„Ÿä¿¡æ¯è·¯å¾„ */\nexport const loggingRedactPaths = [\n  'req.headers.authorization',\n  'req.body.token',\n  'req.body.refreshToken',\n  'req.body.email',\n  'req.body.password',\n  'req.body.oldPassword',\n];\n\n/** é»˜è®¤åˆ†é¡µå¤§å° */\nexport const DEFAULT_PAGE_LIMIT = 10;\n\n/** é»˜è®¤å½“å‰é¡µç  */\nexport const DEFAULT_CURRENT_PAGE = 1;\n\n/** ç³»ç»Ÿç”¨æˆ·ID */\nexport const SYSTEM_USER_ID = 'system';\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * This is not a production server yet!\n * This is only a minimal backend to get started.\n */\n\nimport { Logger } from '@nestjs/common';\nimport { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  const globalPrefix = 'api';\n  app.setGlobalPrefix(globalPrefix);\n  const port = process.env.PORT || 3000;\n  await app.listen(port);\n  Logger.log(\n    `ğŸš€ Application is running on: http://localhost:${port}/${globalPrefix}`\n  );\n}\n\nbootstrap();\n"],"names":[],"sourceRoot":""}